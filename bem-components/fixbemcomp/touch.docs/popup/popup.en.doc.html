<h1 id="popup"><a href="#popup" class="anchor"></a>popup</h1>
<p><code>popup</code> block is used to create and manage state, behavior and appearance of popups. It can be triggered by a button or a pseudo link. Popup is always displayed above all other elements on a page.</p>
<p>When <code>popup</code> is opened for the first time (<code>visible</code> modifier with <code>true</code> value is set) block&#39;s DOM element is created in the end of the document <code>&lt;body&gt;</code>.</p>
<h2 id="Initialization-of-a-block"><a href="#Initialization-of-a-block" class="anchor"></a>Initialization of a block</h2>
<p>To display <code>popup</code> when <code>visible</code> modifier is assigned, block should be initialized to <code>setTarget</code> method. <code>setTarget</code> needs to determine the popup position on a page. It can be performed:</p>
<ul>
<li>according to a parent block position. In this case the parent DOM element or BEM block should be passed as an argument to <code>setTarget</code>;</li>
<li>by direct coordinates defining. The first and the second arguments passed to <code>setTarget</code> define left and top margins on a page: <code>setTarget(x-coordinate, y-coordinate)</code>.</li>
</ul>
<p>The method returns <code>this</code>.</p>
<h2 id="Custom-fields-of-a-block"><a href="#Custom-fields-of-a-block" class="anchor"></a>Custom fields of a block</h2>
<p>The following custom fields could be specified in BEMJSON declaration of the block:</p>
<div class="table-container"><table>
    <tr>
        <th>Custom field name</th>
        <th>Type</th>
        <th>Description</th>
    </tr>
    <tr>
        <td><a href="#direction">directions</a></td>
        <td>
            <code>Array</code>
        </td>
        <td>Specifies position (e.g., <code>bottom-left</code>, where <code>bottom</code> is main direction and <code>left</code> — secondary) of <code>popup</code> relative to the element that triggers it.</td>
    </tr>
    <tr>
        <td>mainOffset</td>
        <td>
            <code>String</code>
        </td>
        <td>Specifies offset along the main direction.</td>
    </tr>
    <tr>
        <td>secondaryOffset</td>
        <td>
            <code>String</code></td>
        <td>Specifies offset along the secondary direction.</td>
    </tr>
    <tr>
        <td>viewportOffset</td>
        <td>
            <code>String</code>
        </td>
        <td>Specifies offset from the viewport (browser window).</td>
    </tr>
    <tr>
        <td>zIndexGroupLevel</td>
        <td>
            <code>String</code>
        </td>
        <td>Specifies level of a layer for popups&#39; opening. Uses <a href="../z-index-group/z-index.group.ru.md">z-index-group</a> block.</td>
    </tr>
</table></div>

<p>Additional required HTML attributes could be specified in <code>attrs</code> field of BEMJSON.</p>
<h2 id="Modifiers-of-a-block"><a href="#Modifiers-of-a-block" class="anchor"></a>Modifiers of a block</h2>
<h3 id="_theme"><a href="#_theme" class="anchor"></a>_theme</h3>
<p>Block supports the following themes:</p>
<ul>
<li>simple</li>
<li>islands</li>
</ul>
<p>If <code>theme</code> modifier is not specified, <a href="#native">native</a> representation of a control is applied.</p>
<p>See following examples:</p>
<p><a name="native"></a>
<strong>default</strong></p>
<pre><code>{
    block : &#39;popup&#39;,
    content : &#39;default&#39;
}
</code></pre><p><strong>simple</strong></p>
<pre><code>{
    block : &#39;popup&#39;,
    mods : { theme : &#39;simple&#39; },
    content : &#39;simple&#39;
}
</code></pre><p><strong>islands</strong></p>
<pre><code>{
    block : &#39;popup&#39;,
    mods : { theme : &#39;islands&#39; },
    content : &#39;islands&#39;
}
</code></pre><h3 id="States-of-a-block"><a href="#States-of-a-block" class="anchor"></a>States of a block</h3>
<h4 id="_visible"><a href="#_visible" class="anchor"></a>_visible</h4>
<p><code>visible</code> modifier is set automatically when <code>popup</code> is displayed. When <code>popup</code> is hidden, <code>visible</code> modifier is removed.</p>
<p><strong>NB:</strong> this block&#39;s version does not support manual selection of <code>visible</code> modifier in BEMJSON.</p>
<h4 id="`_autoclosable`"><a href="#`_autoclosable`" class="anchor"></a><code>_autoclosable</code></h4>
<p>When <code>autoclosable</code> modifier with <code>true</code> is set to <code>popup</code> block, mouse click outside the popup area hides it automatically.</p>
<pre><code>{
    block : &#39;popup&#39;,
    mods : { theme : &#39;islands&#39;, autoclosable : true },
    content : &#39;islands&#39;
}
</code></pre><p><a name="direction"></p>
<h2 id="Popup-opening-direction-`_direction`"><a href="#Popup-opening-direction-`_direction`" class="anchor"></a>Popup opening direction <code>_direction</code></h2>
<p>This modifier controls position of <code>popup</code> relative to the element that triggers it.</p>
<p>By default the following admissible directions are available:</p>
<ul>
<li>bottom-left</li>
<li>bottom-center</li>
<li>bottom-right</li>
<li>top-left</li>
<li>top-center</li>
<li>top-right</li>
<li>right-top</li>
<li>right-center</li>
<li>right-bottom</li>
<li>left-top</li>
<li>left-center</li>
<li>left-bottom</li>
</ul>
<p>Required popup positions can be listed as JS parameters with <code>direction</code> key in BEMJSON declaration. The most suitable directions will be chosen among provided values  according to a parent block position on a page</p>
<p>For example, to open <code>popup</code> at the top of the parent block use <code>top-left</code>, <code>top-center</code> and <code>top-right</code> values:</p>
<pre><code>{
    block : &#39;popup&#39;,
    mods : { autoclosable : true, theme: &#39;simple&#39; },
    directions : [&#39;top-left&#39;, &#39;top-center&#39;, &#39;top-right&#39;],
    content : &#39;Hello, world!&#39;
}
</code></pre><p>To open <code>popup</code> strictly at the <code>center-right</code> position do the following:</p>
<pre><code>{
    block : &#39;popup&#39;,
    mods : { autoclosable : true, theme: &#39;simple&#39; },
    directions : [&#39;right-center&#39;],
    content : &#39;Hello, world!&#39;
}
</code></pre><p>Use <code>mainOffset</code> and/or <code>secondaryOffset</code> parameters to manage the offset direction:</p>
<pre><code>{
    block : &#39;popup&#39;,
    mods : { autoclosable : true, theme: &#39;islands&#39; },
    direction : [&#39;right-center&#39;],
    mainOffset : 100,
    secondaryOffset : 100,
    content : &#39;Hello, world!&#39;
}
</code></pre><h2 id="Relationship-between-popups"><a href="#Relationship-between-popups" class="anchor"></a>Relationship between popups</h2>
<p><code>popup</code> block supports nested structure of multiple simultaneous popups. It means you can open popup (child) within another popup (parent) with the parent popup remaining opened.</p>
<p>If <code>autoclosable</code> modifier is specified, mouse click outside the parent popup area hides it and all its child automatically.</p>
<p>Child popup blocks can be regarded as a chain of <code>1</code> → <code>2</code> → <code>3</code> → <code>4</code>. By clicking on the second element of a chain, third and forth will be closed. By clicking on the first – the second, third and forth will be closed. Clicking outside any popup area of the chain elements will close all popups.</p>
