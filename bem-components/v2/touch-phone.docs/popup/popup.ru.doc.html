<h1 id="popup">popup</h1>
<p>Блок <code>popup</code> используется для создания выпадающих элементов и позволяет изменять их состояние, поведение и внешний вид. Блок всегда отображается поверх остальных элементов страницы.</p>
<p>Попап может быть вызван различными элементами страницы, например, кнопками или псевдоссылками.</p>
<p>При первом открытии попапа DOM-элемент блока переносится в конце <code>&lt;body&gt;</code>. Блок получает модификатор <code>visible</code>.</p>
<h2 id="Инициализация-блока">Инициализация блока</h2>
<p>Чтобы попап отображался при установке модификатора <code>visible</code>, блок должен быть предварительно инициализирован. Для этого служит метод <code>setTarget</code>. В ходе выполнения методу необходимо определить положение попапа на странице. Это может осуществляться:</p>
<ul>
<li>исходя из положения на странице родительского элемента. В этом случае методу <code>setTarget</code> следует передать аргументом родительский DOM-элемент или БЭМ-блок;</li>
<li>путем явного указания координат. Первым аргументом методу <code>setTarget</code> передается значение отступа от левого края страницы, вторым отступ сверху: <code>setTarget(x-coordinate, y-coordinate)</code>.</li>
</ul>
<p>Метод <code>setTarget</code> возвращает объект <code>this</code>.</p>
<h2 id="Специализированные-поля-блока">Специализированные поля блока</h2>
<p>Список зарезервированных полей входного BEMJSON:</p>
<div class="table-container"><table>
    <tr>
        <th>Поле</th>
        <th>Тип</th>
        <th>Описание</th>
    </tr>
    <tr>
        <td>directions</td>
        <td>
            <code>Массив</code>
        </td>
        <td>Управляет <a href="#directions">направлением открытия попапа</a> (например, <code>bottom-left</code>, где <code>bottom</code> является основным параметром, <code>left</code> - второстепенным) на странице относительно вызвавшего его элемета.</td>
    </tr>
    <tr>
        <td>mainOffset</td>
        <td>
            <code>String</code>
        </td>
        <td>Задает смещение попапа относительно основного направления.</td>
    </tr>
    <tr>
        <td>secondaryOffset</td>
        <td>
            <code>BEMJSON</code></td>
        <td>Задает смещение попапа относительно второстепенного направления.</td>
    </tr>
    <tr>
        <td>viewportOffset</td>
        <td>
            <code>String</code>
        </td>
        <td>Задает смещение попапа от края окна браузера.</td>
    </tr>
    <tr>
        <td>zIndexGroupLevel</td>
        <td>
            <code>String</code>
        </td>
        <td>Позволяет задать уровень слоя для открывающихся попапов. Основан на блоке <a href="../z-index-group/z-index.group.ru.md">z-index-group</a></td>
    </tr>
</table></div>

<p>При необходимости дополнительные HTML-атрибуты блока могут быть заданы в зарезервированном поле <code>attrs</code> в BEMJSON.</p>
<h2 id="Модификаторы-блока">Модификаторы блока</h2>
<h3 id="Темы-`_theme`">Темы <code>_theme</code></h3>
<p>Блок представлен в следующих темах:</p>
<ul>
<li>simple</li>
<li>normal</li>
</ul>
<p>Без указания модификатора <code>theme</code> отображается <a href="#native">нативный</a> вид контрола.</p>
<p>Наглядно видно на примерах ниже:</p>
<p><a name="native"></a>
<strong>default</strong></p>
<p><strong>simple</strong></p>
<p><strong>normal</strong></p>
<h3 id="Видимый-`_visible`">Видимый <code>_visible</code></h3>
<p>Модификатор <code>visible</code> выставляется блоку автоматически при открытии попапа. Когда попап скрыт, модификатор удаляется.</p>
<p><strong>NB:</strong> данная реализация блока не поддерживает принудительную установку модификатора <code>visible</code> в BEMJSON-декларации.</p>
<h4 id="`_autoscalable`"><code>_autoscalable</code></h4>
<p>Модификатор <code>autoscalable</code> скрывает блок по щелчку мыши вне зоны попапа.</p>
<p><a href="direction"></a></p>
<h2 id="Расположение-относительно-родителя-`_direction`">Расположение относительно родителя <code>_direction</code></h2>
<p>Поле <code>direction</code> управляет направлением открытия попапа на странице относительно вызвавшего его элемета. Расположение блока определяется автоматически, исходя из массива допустимых направлений и положения родителя на странице.</p>
<p>По умолчанию используется следующий массив допустимых направлений:</p>
<ul>
<li>bottom-left</li>
<li>bottom-center</li>
<li>bottom-right</li>
<li>top-left</li>
<li>top-center</li>
<li>top-right</li>
<li>right-top</li>
<li>right-center</li>
<li>right-bottom</li>
<li>left-top</li>
<li>left-center</li>
<li>left-bottom</li>
</ul>
<p>Чтобы управлять расположением попапа, можно ограничить массив направлений открытия, оставив только требуемые. Пользовательский массив нужно передать в качестве JS-параметра с ключом <code>directions</code>. При этом из значений массива будет выбрано наиболее подходящее, исходя из положения родителя на странице.</p>
<p>Например, если требуется, чтобы попап раскрывался над родителем:</p>
<p>Или небходимо разместить попап справа по центру:</p>
<p>Используйте поля <code>mainOffset</code> и/или <code>secondaryOffset</code> для управления направлением смещения.</p>
<h2 id="Взаимосвязи-между-popup-ами">Взаимосвязи между popup&#39;ами</h2>
<p>Блок <code>popup</code> поддерживает вложенную структуру нескольких одновременно открытых попапов. Это означает, что один попап может вызывать второй, а второй, соответственно, может вызвать третий и так далее. И при этом все попапы будут оставаться открытыми.</p>
<p>Если установлен модификатор <code>autoscalable</code> в значении <code>true</code>, то при щелчке мышью вне зоны попапа, попап закроется сам и закроет свои дочерние блоки.</p>
<p>Дочерние блоки popup можно рассматривать в виде цепочки <code>1</code> → <code>2</code> → <code>3</code> → <code>4</code>. При клике на втором попапе – закрываются третий и четвертый. При клике в первом – закрываются второй, третий, четвертый. При клике за пределами любого попапа из цепочки – закроются все.</p>
